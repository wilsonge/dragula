{"mappings":"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","sources":["src/dragula.js","src/Dragula/Dragula.js","<<jsx-config-pragma.js>>","node_modules/contra/emitter.js","node_modules/atoa/atoa.js","node_modules/contra/debounce.js","node_modules/ticky/ticky-browser.js","src/Dragula/Events.js","node_modules/crossvent/src/crossvent.js","node_modules/custom-event/index.js","node_modules/crossvent/src/eventmap.js","src/Dragula/Mouse.js","src/classes.js"],"sourcesContent":["import Dragula from './Dragula/Dragula';\n\nwindow.dragula = (initialContainers, options) => {\n  if (options === undefined && Array.isArray(initialContainers) === false) {\n    // eslint-disable-next-line no-param-reassign\n    options = initialContainers;\n    // eslint-disable-next-line no-param-reassign\n    initialContainers = [];\n    // eslint-disable-next-line no-prototype-builtins\n  } else if (options !== undefined && options.hasOwnProperty('containers') === false && Array.isArray(initialContainers)) {\n    // eslint-disable-next-line no-param-reassign\n    options.containers = initialContainers;\n  } else {\n    // eslint-disable-next-line no-param-reassign\n    options = { containers: initialContainers };\n  }\n\n  const dragulaObject = new Dragula(options);\n  dragulaObject.events();\n  return dragulaObject.getDrake();\n};\n","import emitter from 'contra/emitter';\nimport { touchy, clicky } from './Events';\nimport whichMouseButton from './Mouse';\nimport * as classes from '../classes';\n\nconst doc = document;\nconst { documentElement } = doc;\n\nfunction getParent(el) { return el.parentNode === doc ? null : el.parentNode; }\n\nfunction getImmediateChild(dropTarget, target) {\n  let immediate = target;\n  while (immediate !== dropTarget && getParent(immediate) !== dropTarget) {\n    immediate = getParent(immediate);\n  }\n  if (immediate === documentElement) {\n    return null;\n  }\n  return immediate;\n}\n\nfunction isEditable(el) {\n  if (!el) { return false; } // no parents were editable\n  if (el.contentEditable === 'false') { return false; } // stop the lookup\n  if (el.contentEditable === 'true') { return true; } // found a contentEditable element in the chain\n  return isEditable(getParent(el)); // contentEditable is set to 'inherit'\n}\n\nfunction isInput(el) { return el.tagName === 'INPUT' || el.tagName === 'TEXTAREA' || el.tagName === 'SELECT' || isEditable(el); }\n\nfunction getEventHost(e) {\n  // on touchend event, we have to use `e.changedTouches`\n  // see http://stackoverflow.com/questions/7192563/touchend-event-properties\n  // see https://github.com/bevacqua/dragula/issues/34\n  if (e.targetTouches && e.targetTouches.length) {\n    return e.targetTouches[0];\n  }\n  if (e.changedTouches && e.changedTouches.length) {\n    return e.changedTouches[0];\n  }\n  return e;\n}\n\nfunction getCoord(coord, e) {\n  const host = getEventHost(e);\n  const missMap = {\n    pageX: 'clientX', // IE8\n    pageY: 'clientY', // IE8\n  };\n  let coordinateName = coord;\n  if (coord in missMap && !(coord in host) && missMap[coord] in host) {\n    coordinateName = missMap[coord];\n  }\n  return host[coordinateName];\n}\n\nfunction getScroll(scrollProp, offsetProp) {\n  if (typeof global[offsetProp] !== 'undefined') {\n    return global[offsetProp];\n  }\n  if (documentElement.clientHeight) {\n    return documentElement[scrollProp];\n  }\n  return doc.body[scrollProp];\n}\n\nfunction getOffset(el) {\n  const rect = el.getBoundingClientRect();\n  return {\n    left: rect.left + getScroll('scrollLeft', 'pageXOffset'),\n    top: rect.top + getScroll('scrollTop', 'pageYOffset'),\n  };\n}\n\nfunction getRectWidth(rect) { return rect.width || (rect.right - rect.left); }\nfunction getRectHeight(rect) { return rect.height || (rect.bottom - rect.top); }\n\n/**\n * Get the next sibiling of the parameter element\n * @param   el  Element\n * @returns {Element}\n */\nfunction nextEl(el) {\n  function manually() {\n    let sibling = el;\n    do {\n      sibling = sibling.nextSibling;\n    } while (sibling && sibling.nodeType !== 1);\n    return sibling;\n  }\n  return el.nextElementSibling || manually();\n}\n\nfunction getElementBehindPoint(point, x, y) {\n  // eslint-disable-next-line no-param-reassign\n  point = point || {};\n  const state = point.className || '';\n  // eslint-disable-next-line no-param-reassign\n  point.className += ' gu-hide';\n  const el = doc.elementFromPoint(x, y);\n  // eslint-disable-next-line no-param-reassign\n  point.className = state;\n  return el;\n}\n\n/**\n * Default Options for Dragula\n * @property  {function(): boolean} moves\n * @property  {function(): boolean} accepts\n * @property  {function(): boolean} invalid\n * @property  {HTMLElement[]}\n * @property  {function(): boolean} isContainer\n * @property  {boolean|function(): boolean} copy\n * @property  {boolean} copySortSource\n * @property  {boolean} revertOnSpill\n * @property  {boolean} removeOnSpill\n * @property  {string}  direction\n * @property  {boolean} ignoreInputTextSelection\n * @property  {HTMLElement} mirrorContainer\n * @property  {int} slideFactorX\n * @property  {int} slideFactorY\n */\nexport const defaultOptions = {\n  moves: () => true,\n  accepts: () => true,\n  invalid: () => false,\n  containers: [],\n  isContainer: () => false,\n  copy: false,\n  copySortSource: false,\n  revertOnSpill: false,\n  removeOnSpill: false,\n  direction: 'vertical',\n  ignoreInputTextSelection: true,\n  mirrorContainer: doc.body,\n  slideFactorX: 0,\n  slideFactorY: 0,\n};\n\n/**\n * @property {Node} mirror   The mirror image\n * @property {Node} source   The source container\n * @property {Node} item     The item being dragged\n * @property {int}  offsetX  The reference x\n * @property {int}  moveX    The reference move x\n * @property {int}  moveY    The reference move y\n * @property {Element}  initialSibling    The reference sibling when grabbed\n * @property {Element}  currentSibling    The reference sibling now\n * @property {Node}  copy    The item used for copying\n * @property {}  renderTimer    The timer for setTimeout renderMirrorImage\n * @property {?Object}  grabbed    Holds mousedown context until first mousemove\n */\nexport default class Dragula {\n  /**\n   * @param {Object} options - Options for dragula\n   */\n  constructor(options = {}) {\n    this.options = {\n      ...defaultOptions,\n      ...options,\n    };\n\n    // Ensure the drop target is init'd to be null from the start\n    this.lastDropTarget = null; // last container item was over\n    this.movementBindFn = this.startBecauseMouseMoved.bind(this);\n    this.preventGrabbedFn = this.preventGrabbed.bind(this);\n    this.grabFn = this.grab.bind(this);\n    this.releaseFn = this.release.bind(this);\n    this.dragFn = this.drag.bind(this);\n\n    this.drake = emitter({\n      containers: this.options.containers,\n      start: this.manualStart.bind(this),\n      end: this.end.bind(this),\n      cancel: this.cancel.bind(this),\n      remove: this.remove.bind(this),\n      destroy: this.destroy.bind(this),\n      canMove: this.canMove.bind(this),\n      dragging: false,\n    });\n\n    if (this.options.removeOnSpill === true) {\n      this.drake.on('over', this.spillOver.bind(this)).on('out', this.spillOut.bind(this));\n    }\n  }\n\n  /**\n   * @param {HTMLElement }el\n   */\n  // eslint-disable-next-line class-methods-use-this\n  spillOver(el) {\n    classes.rm(el, 'gu-hide');\n  }\n\n  /**\n   * @param {HTMLElement }el\n   */\n  spillOut(el) {\n    if (this.drake.dragging) { classes.add(el, 'gu-hide'); }\n  }\n\n  /**\n   * Adds the event bindings to the dom\n   * @param {boolean} remove\n   */\n  events(remove = false) {\n    const op = remove ? 'remove' : 'add';\n    touchy(documentElement, op, 'mousedown', this.grabFn);\n    touchy(documentElement, op, 'mouseup', this.releaseFn);\n  }\n\n  /**\n   * @param {Event} e - Event on grabbing an item\n   */\n  preventGrabbed(e) {\n    if (this.grabbed) {\n      e.preventDefault();\n    }\n  }\n\n  movements(remove) {\n    const op = remove ? 'remove' : 'add';\n    clicky(documentElement, op, this.preventGrabbedFn);\n  }\n\n  getDrake() {\n    return this.drake;\n  }\n\n  /**\n   * Called when picking up an item to drag\n   * @param {MouseEvent} e - The event\n   */\n  grab(e) {\n    this.moveX = e.clientX;\n    this.moveY = e.clientY;\n\n    const ignore = whichMouseButton(e) !== 1 || e.metaKey || e.ctrlKey;\n    if (ignore) {\n      return; // we only care about honest-to-god left clicks and touch events\n    }\n    const item = e.target;\n    const context = this.canStart(item);\n    if (!context) {\n      return;\n    }\n    this.grabbed = context;\n    this.eventualMovements();\n    if (e.type === 'mousedown') {\n      if (isInput(item)) { // see also: https://github.com/bevacqua/dragula/issues/208\n        item.focus(); // fixes https://github.com/bevacqua/dragula/issues/176\n      } else {\n        e.preventDefault(); // fixes https://github.com/bevacqua/dragula/issues/155\n      }\n    }\n  }\n\n  ungrab() {\n    this.grabbed = false;\n    this.eventualMovements(true);\n    this.movements(true);\n  }\n\n  release(e) {\n    this.ungrab();\n\n    if (!this.drake.dragging) {\n      return;\n    }\n    const item = this.copy || this.item;\n    const clientX = getCoord('clientX', e) || 0;\n    const clientY = getCoord('clientY', e) || 0;\n    const elementBehindCursor = getElementBehindPoint(this.mirror, clientX, clientY);\n    const dropTarget = this.findDropTarget(elementBehindCursor, clientX, clientY);\n\n    // eslint-disable-next-line max-len\n    if (dropTarget && ((this.copy && this.options.copySortSource) || (!this.copy || dropTarget !== this.source))) {\n      this.drop(item, dropTarget);\n    } else if (this.options.removeOnSpill) {\n      this.remove();\n    } else {\n      this.cancel();\n    }\n  }\n\n  eventualMovements(remove) {\n    const op = remove ? 'remove' : 'add';\n    touchy(documentElement, op, 'mousemove', this.movementBindFn);\n  }\n\n  startBecauseMouseMoved(e) {\n    if (!this.grabbed) {\n      return;\n    }\n    if (whichMouseButton(e) === 0) {\n      this.release({});\n      // eslint-disable-next-line max-len\n      return; // when text is selected on an input and then dragged, mouseup doesn't fire. this is our only hope\n    }\n\n    // truthy check fixes #239, equality fixes #207, fixes #501\n    // eslint-disable-next-line max-len\n    if ((e.clientX !== undefined && Math.abs(e.clientX - this.moveX) <= this.options.slideFactorX)\n      // eslint-disable-next-line max-len\n      && (e.clientY !== undefined && Math.abs(e.clientY - this.moveY) <= this.options.slideFactorY)) {\n      return;\n    }\n\n    if (this.options.ignoreInputTextSelection) {\n      const clientX = getCoord('clientX', e) || 0;\n      const clientY = getCoord('clientY', e) || 0;\n      const elementBehindCursor = doc.elementFromPoint(clientX, clientY);\n      if (isInput(elementBehindCursor)) {\n        return;\n      }\n    }\n\n    const { grabbed } = this; // call to end() unsets _grabbed\n    this.eventualMovements(true);\n    this.movements();\n    this.end();\n    this.start(grabbed);\n\n    const offset = getOffset(this.item);\n    this.offsetX = getCoord('pageX', e) - offset.left;\n    this.offsetY = getCoord('pageY', e) - offset.top;\n\n    classes.add(this.copy || this.item, 'gu-transit');\n    this.renderMirrorImage();\n    this.drag(e);\n  }\n\n  drag(e) {\n    if (!this.mirror) {\n      return;\n    }\n    e.preventDefault();\n\n    const clientX = getCoord('clientX', e) || 0;\n    const clientY = getCoord('clientY', e) || 0;\n    const x = clientX - this.offsetX;\n    const y = clientY - this.offsetY;\n\n    this.mirror.style.left = `${x}px`;\n    this.mirror.style.top = `${y}px`;\n\n    const item = this.copy || this.item;\n    const elementBehindCursor = getElementBehindPoint(this.mirror, clientX, clientY);\n    let dropTarget = this.findDropTarget(elementBehindCursor, clientX, clientY);\n    const changed = dropTarget !== null && dropTarget !== this.lastDropTarget;\n\n    if (changed || dropTarget === null) {\n      if (this.lastDropTarget) { this.drake.emit('out', item, this.lastDropTarget, this.source); }\n      this.lastDropTarget = dropTarget;\n      if (changed) { this.drake.emit('over', item, this.lastDropTarget, this.source); }\n    }\n    const parent = getParent(item);\n    if (dropTarget === this.source && this.copy && !this.options.copySortSource) {\n      if (parent) {\n        parent.removeChild(item);\n      }\n      return;\n    }\n    let reference;\n    const immediate = getImmediateChild(dropTarget, elementBehindCursor);\n    if (immediate !== null) {\n      reference = this.getReference(dropTarget, immediate, clientX, clientY);\n    } else if (this.options.revertOnSpill === true && !this.copy) {\n      reference = this.initialSibling;\n      dropTarget = this.source;\n    } else {\n      if (this.copy && parent) {\n        parent.removeChild(item);\n      }\n      return;\n    }\n    if (\n      (reference === null && changed)\n       || (reference !== item && reference !== nextEl(item))\n    ) {\n      this.currentSibling = reference;\n      dropTarget.insertBefore(item, reference);\n      this.drake.emit('shadow', item, dropTarget, this.source);\n    }\n  }\n\n  renderMirrorImage() {\n    if (this.mirror) {\n      return;\n    }\n    const rect = this.item.getBoundingClientRect();\n    this.mirror = this.item.cloneNode(true);\n    this.mirror.style.width = `${getRectWidth(rect)}px`;\n    this.mirror.style.height = `${getRectHeight(rect)}px`;\n    classes.rm(this.mirror, 'gu-transit');\n    classes.add(this.mirror, 'gu-mirror');\n    this.options.mirrorContainer.appendChild(this.mirror);\n    touchy(documentElement, 'add', 'mousemove', this.dragFn);\n    classes.add(this.options.mirrorContainer, 'gu-unselectable');\n    this.drake.emit('cloned', this.mirror, this.item, 'mirror');\n  }\n\n  removeMirrorImage() {\n    if (this.mirror) {\n      classes.rm(this.options.mirrorContainer, 'gu-unselectable');\n      touchy(documentElement, 'remove', 'mousemove', this.dragFn);\n      getParent(this.mirror).removeChild(this.mirror);\n      this.mirror = null;\n    }\n  }\n\n  start(context) {\n    if (this.isCopy(context.item, context.source)) {\n      this.copy = context.item.cloneNode(true);\n      this.drake.emit('cloned', this.copy, context.item, 'copy');\n    }\n\n    this.source = context.source;\n    this.item = context.item;\n    this.initialSibling = nextEl(context.item);\n    this.currentSibling = nextEl(context.item);\n\n    this.drake.dragging = true;\n    this.drake.emit('drag', this.item, this.source);\n  }\n\n  end() {\n    if (!this.drake.dragging) {\n      return;\n    }\n    const item = this.copy || this.item;\n    this.drop(item, getParent(item));\n  }\n\n  cancel(revert) {\n    if (!this.drake.dragging) {\n      return;\n    }\n    const reverts = arguments.length > 0 ? revert : this.options.revertOnSpill;\n    const item = this.copy || this.item;\n    const parent = getParent(item);\n    const initial = this.isInitialPlacement(parent);\n    if (initial === false && reverts) {\n      if (this.copy) {\n        if (parent) {\n          parent.removeChild(this.copy);\n        }\n      } else {\n        this.source.insertBefore(item, this.initialSibling);\n      }\n    }\n    if (initial || reverts) {\n      this.drake.emit('cancel', item, this.source, this.source);\n    } else {\n      this.drake.emit('drop', item, parent, this.source, this.currentSibling);\n    }\n    this.cleanup();\n  }\n\n  cleanup() {\n    const item = this.copy || this.item;\n    this.ungrab();\n    this.removeMirrorImage();\n    if (item) {\n      classes.rm(item, 'gu-transit');\n    }\n    if (this.renderTimer) {\n      clearTimeout(this.renderTimer);\n    }\n    this.drake.dragging = false;\n    if (this.lastDropTarget) {\n      this.drake.emit('out', item, this.lastDropTarget, this.source);\n    }\n    this.drake.emit('dragend', item);\n    // eslint-disable-next-line max-len,no-multi-assign\n    this.source = this.item = this.copy = this.initialSibling = this.currentSibling = this.renderTimer = this.lastDropTarget = null;\n  }\n\n  isCopy(item, container) {\n    return typeof this.options.copy === 'boolean' ? this.options.copy : this.options.copy(item, container);\n  }\n\n  isContainer(el) {\n    return this.drake.containers.indexOf(el) !== -1 || this.options.isContainer(el);\n  }\n\n  findDropTarget(elementBehindCursor, clientX, clientY) {\n    let target = elementBehindCursor;\n\n    while (target && !this.isDropTargetAccepted(target, elementBehindCursor, clientX, clientY)) {\n      target = getParent(target);\n    }\n    return target;\n  }\n\n  isDropTargetAccepted(target, originalTarget, clientX, clientY) {\n    const droppable = this.isContainer(target);\n    if (droppable === false) {\n      return false;\n    }\n\n    const immediate = getImmediateChild(target, originalTarget);\n    const reference = this.getReference(target, immediate, clientX, clientY);\n    const initial = this.isInitialPlacement(target, reference);\n    if (initial) {\n      return true; // should always be able to drop it right back where it was\n    }\n    return this.options.accepts(this.item, target, this.source, reference);\n  }\n\n  isInitialPlacement(target, s) {\n    let sibling;\n    if (s !== undefined) {\n      sibling = s;\n    } else if (this.mirror) {\n      sibling = this.currentSibling;\n    } else {\n      sibling = nextEl(this.copy || this.item);\n    }\n    return target === this.source && sibling === this.initialSibling;\n  }\n\n  getReference(dropTarget, target, x, y) {\n    const horizontal = this.options.direction === 'horizontal';\n\n    function resolve(after) {\n      return after ? nextEl(target) : target;\n    }\n\n    function outside() { // slower, but able to figure out any position\n      const { children } = dropTarget;\n      const len = children.length;\n      let el;\n      let rect;\n      // eslint-disable-next-line no-plusplus\n      for (let i = 0; i < len; i++) {\n        el = children[i];\n        rect = el.getBoundingClientRect();\n        if (horizontal && (rect.left + rect.width / 2) > x) { return el; }\n        if (!horizontal && (rect.top + rect.height / 2) > y) { return el; }\n      }\n      return null;\n    }\n\n    function inside() { // faster, but only available if dropped inside a child element\n      const rect = target.getBoundingClientRect();\n      if (horizontal) {\n        return resolve(x > rect.left + getRectWidth(rect) / 2);\n      }\n      return resolve(y > rect.top + getRectHeight(rect) / 2);\n    }\n\n    return target !== dropTarget ? inside() : outside();\n  }\n\n  /**\n   * @param {Node} item - The item being checked\n   */\n  canStart(item) {\n    if (this.drake.dragging && this.mirror) {\n      return;\n    }\n    if (this.isContainer(item)) {\n      return; // don't drag container itself\n    }\n    const handle = item;\n    while (getParent(item) && this.isContainer(getParent(item)) === false) {\n      if (this.options.invalid(item, handle)) {\n        return;\n      }\n      // eslint-disable-next-line no-param-reassign\n      item = getParent(item); // drag target should be a top element\n      if (!item) {\n        return;\n      }\n    }\n    const source = getParent(item);\n    if (!source) {\n      return;\n    }\n    if (this.options.invalid(item, handle)) {\n      return;\n    }\n\n    const movable = this.options.moves(item, source, handle, nextEl(item));\n    if (!movable) {\n      return;\n    }\n\n    // eslint-disable-next-line consistent-return\n    return {\n      item,\n      source,\n    };\n  }\n\n  drop(item, target) {\n    const parent = getParent(item);\n    if (this.copy && this.options.copySortSource && target === this.source) {\n      parent.removeChild(this.item);\n    }\n    if (this.isInitialPlacement(target)) {\n      this.drake.emit('cancel', item, this.source, this.source);\n    } else {\n      this.drake.emit('drop', item, target, this.source, this.currentSibling);\n    }\n    this.cleanup();\n  }\n\n  canMove(item) {\n    return !!this.canStart(item);\n  }\n\n  remove() {\n    if (!this.drake.dragging) {\n      return;\n    }\n    const item = this.copy || this.item;\n    const parent = getParent(item);\n    if (parent) {\n      parent.removeChild(item);\n    }\n    this.drake.emit(this.copy ? 'cancel' : 'remove', item, parent, this.source);\n    this.cleanup();\n  }\n\n  destroy() {\n    this.events(true);\n    this.release({});\n  }\n\n  manualStart(item) {\n    const context = this.canStart(item);\n    if (context) {\n      this.start(context);\n    }\n  }\n}\n",null,"'use strict';\n\nvar atoa = require('atoa');\nvar debounce = require('./debounce');\n\nmodule.exports = function emitter (thing, options) {\n  var opts = options || {};\n  var evt = {};\n  if (thing === undefined) { thing = {}; }\n  thing.on = function (type, fn) {\n    if (!evt[type]) {\n      evt[type] = [fn];\n    } else {\n      evt[type].push(fn);\n    }\n    return thing;\n  };\n  thing.once = function (type, fn) {\n    fn._once = true; // thing.off(fn) still works!\n    thing.on(type, fn);\n    return thing;\n  };\n  thing.off = function (type, fn) {\n    var c = arguments.length;\n    if (c === 1) {\n      delete evt[type];\n    } else if (c === 0) {\n      evt = {};\n    } else {\n      var et = evt[type];\n      if (!et) { return thing; }\n      et.splice(et.indexOf(fn), 1);\n    }\n    return thing;\n  };\n  thing.emit = function () {\n    var args = atoa(arguments);\n    return thing.emitterSnapshot(args.shift()).apply(this, args);\n  };\n  thing.emitterSnapshot = function (type) {\n    var et = (evt[type] || []).slice(0);\n    return function () {\n      var args = atoa(arguments);\n      var ctx = this || thing;\n      if (type === 'error' && opts.throws !== false && !et.length) { throw args.length === 1 ? args[0] : args; }\n      et.forEach(function emitter (listen) {\n        if (opts.async) { debounce(listen, args, ctx); } else { listen.apply(ctx, args); }\n        if (listen._once) { thing.off(type, listen); }\n      });\n      return thing;\n    };\n  };\n  return thing;\n};\n","module.exports = function atoa (a, n) { return Array.prototype.slice.call(a, n); }\n","'use strict';\n\nvar ticky = require('ticky');\n\nmodule.exports = function debounce (fn, args, ctx) {\n  if (!fn) { return; }\n  ticky(function run () {\n    fn.apply(ctx || null, args || []);\n  });\n};\n","var si = typeof setImmediate === 'function', tick;\nif (si) {\n  tick = function (fn) { setImmediate(fn); };\n} else {\n  tick = function (fn) { setTimeout(fn, 0); };\n}\n\nmodule.exports = tick;","import crossvent from 'crossvent';\n\nexport function touchy(el, op, type, fn) {\n  const touch = {\n    mouseup: 'touchend',\n    mousedown: 'touchstart',\n    mousemove: 'touchmove',\n  };\n  const pointers = {\n    mouseup: 'pointerup',\n    mousedown: 'pointerdown',\n    mousemove: 'pointermove',\n  };\n  const microsoft = {\n    mouseup: 'MSPointerUp',\n    mousedown: 'MSPointerDown',\n    mousemove: 'MSPointerMove',\n  };\n  const { navigator } = global;\n\n  if (navigator.pointerEnabled) {\n    crossvent[op](el, pointers[type], fn);\n  } else if (navigator.msPointerEnabled) {\n    crossvent[op](el, microsoft[type], fn);\n  } else {\n    crossvent[op](el, touch[type], fn);\n    crossvent[op](el, type, fn);\n  }\n}\n\nexport function clicky(el, op, fn) {\n  crossvent[op](el, 'selectstart', fn); // IE8\n  crossvent[op](el, 'click', fn);\n}\n","'use strict';\n\nvar customEvent = require('custom-event');\nvar eventmap = require('./eventmap');\nvar doc = global.document;\nvar addEvent = addEventEasy;\nvar removeEvent = removeEventEasy;\nvar hardCache = [];\n\nif (!global.addEventListener) {\n  addEvent = addEventHard;\n  removeEvent = removeEventHard;\n}\n\nmodule.exports = {\n  add: addEvent,\n  remove: removeEvent,\n  fabricate: fabricateEvent\n};\n\nfunction addEventEasy (el, type, fn, capturing) {\n  return el.addEventListener(type, fn, capturing);\n}\n\nfunction addEventHard (el, type, fn) {\n  return el.attachEvent('on' + type, wrap(el, type, fn));\n}\n\nfunction removeEventEasy (el, type, fn, capturing) {\n  return el.removeEventListener(type, fn, capturing);\n}\n\nfunction removeEventHard (el, type, fn) {\n  var listener = unwrap(el, type, fn);\n  if (listener) {\n    return el.detachEvent('on' + type, listener);\n  }\n}\n\nfunction fabricateEvent (el, type, model) {\n  var e = eventmap.indexOf(type) === -1 ? makeCustomEvent() : makeClassicEvent();\n  if (el.dispatchEvent) {\n    el.dispatchEvent(e);\n  } else {\n    el.fireEvent('on' + type, e);\n  }\n  function makeClassicEvent () {\n    var e;\n    if (doc.createEvent) {\n      e = doc.createEvent('Event');\n      e.initEvent(type, true, true);\n    } else if (doc.createEventObject) {\n      e = doc.createEventObject();\n    }\n    return e;\n  }\n  function makeCustomEvent () {\n    return new customEvent(type, { detail: model });\n  }\n}\n\nfunction wrapperFactory (el, type, fn) {\n  return function wrapper (originalEvent) {\n    var e = originalEvent || global.event;\n    e.target = e.target || e.srcElement;\n    e.preventDefault = e.preventDefault || function preventDefault () { e.returnValue = false; };\n    e.stopPropagation = e.stopPropagation || function stopPropagation () { e.cancelBubble = true; };\n    e.which = e.which || e.keyCode;\n    fn.call(el, e);\n  };\n}\n\nfunction wrap (el, type, fn) {\n  var wrapper = unwrap(el, type, fn) || wrapperFactory(el, type, fn);\n  hardCache.push({\n    wrapper: wrapper,\n    element: el,\n    type: type,\n    fn: fn\n  });\n  return wrapper;\n}\n\nfunction unwrap (el, type, fn) {\n  var i = find(el, type, fn);\n  if (i) {\n    var wrapper = hardCache[i].wrapper;\n    hardCache.splice(i, 1); // free up a tad of memory\n    return wrapper;\n  }\n}\n\nfunction find (el, type, fn) {\n  var i, item;\n  for (i = 0; i < hardCache.length; i++) {\n    item = hardCache[i];\n    if (item.element === el && item.type === type && item.fn === fn) {\n      return i;\n    }\n  }\n}\n","\nvar NativeCustomEvent = global.CustomEvent;\n\nfunction useNative () {\n  try {\n    var p = new NativeCustomEvent('cat', { detail: { foo: 'bar' } });\n    return  'cat' === p.type && 'bar' === p.detail.foo;\n  } catch (e) {\n  }\n  return false;\n}\n\n/**\n * Cross-browser `CustomEvent` constructor.\n *\n * https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent.CustomEvent\n *\n * @public\n */\n\nmodule.exports = useNative() ? NativeCustomEvent :\n\n// IE >= 9\n'undefined' !== typeof document && 'function' === typeof document.createEvent ? function CustomEvent (type, params) {\n  var e = document.createEvent('CustomEvent');\n  if (params) {\n    e.initCustomEvent(type, params.bubbles, params.cancelable, params.detail);\n  } else {\n    e.initCustomEvent(type, false, false, void 0);\n  }\n  return e;\n} :\n\n// IE <= 8\nfunction CustomEvent (type, params) {\n  var e = document.createEventObject();\n  e.type = type;\n  if (params) {\n    e.bubbles = Boolean(params.bubbles);\n    e.cancelable = Boolean(params.cancelable);\n    e.detail = params.detail;\n  } else {\n    e.bubbles = false;\n    e.cancelable = false;\n    e.detail = void 0;\n  }\n  return e;\n}\n","'use strict';\n\nvar eventmap = [];\nvar eventname = '';\nvar ron = /^on/;\n\nfor (eventname in global) {\n  if (ron.test(eventname)) {\n    eventmap.push(eventname.slice(2));\n  }\n}\n\nmodule.exports = eventmap;\n","// eslint-disable-next-line consistent-return\nexport default function whichMouseButton(e) {\n  if (e.touches !== undefined) { return e.touches.length; }\n  if (e.which !== undefined && e.which !== 0) { return e.which; } // see https://github.com/bevacqua/dragula/issues/261\n  if (e.buttons !== undefined) { return e.buttons; }\n  const { button } = e;\n  if (button !== undefined) { // see https://github.com/jquery/jquery/blob/99e8ff1baa7ae341e94bb89c3e84570c7c3ad9ea/src/event.js#L573-L575\n    // eslint-disable-next-line no-bitwise,no-nested-ternary\n    return button & 1 ? 1 : button & 2 ? 3 : (button & 4 ? 2 : 0);\n  }\n}\n","const cache = {};\nconst start = '(?:^|\\\\s)';\nconst end = '(?:\\\\s|$)';\n\nfunction lookupClass(className) {\n  let cached = cache[className];\n  if (cached) {\n    cached.lastIndex = 0;\n  } else {\n    cached = new RegExp(start + className + end, 'g');\n    cache[className] = cached;\n  }\n  return cached;\n}\n\n/**\n * @param {HTMLElement} el\n * @param {string} className\n */\nfunction addClass(el, className) {\n  const current = el.className;\n  if (!current.length) {\n    // eslint-disable-next-line no-param-reassign\n    el.className = className;\n  } else if (!lookupClass(className).test(current)) {\n    // eslint-disable-next-line no-param-reassign\n    el.className += ` ${className}`;\n  }\n}\n\n/**\n * @param {HTMLElement} el\n * @param {string} className\n */\nfunction rmClass(el, className) {\n  // eslint-disable-next-line no-param-reassign\n  el.className = el.className.replace(lookupClass(className), ' ').trim();\n}\n\nmodule.exports = {\n  add: addClass,\n  rm: rmClass,\n};\n"],"names":["Dragula","window","dragula","initialContainers","options","undefined","Array","isArray","hasOwnProperty","containers","dragulaObject","events","getDrake","emitter","touchy","clicky","whichMouseButton","classes","doc","document","documentElement","getParent","el","parentNode","getImmediateChild","dropTarget","target","immediate","isEditable","contentEditable","isInput","tagName","getEventHost","e","targetTouches","length","changedTouches","getCoord","coord","host","missMap","pageX","pageY","coordinateName","getScroll","scrollProp","offsetProp","global","clientHeight","body","getOffset","rect","getBoundingClientRect","left","top","getRectWidth","width","right","getRectHeight","height","bottom","nextEl","manually","sibling","nextSibling","nodeType","nextElementSibling","getElementBehindPoint","point","x","y","state","className","elementFromPoint","defaultOptions","moves","accepts","invalid","isContainer","copy","copySortSource","revertOnSpill","removeOnSpill","direction","ignoreInputTextSelection","mirrorContainer","slideFactorX","slideFactorY","constructor","lastDropTarget","movementBindFn","startBecauseMouseMoved","bind","preventGrabbedFn","preventGrabbed","grabFn","grab","releaseFn","release","dragFn","drag","drake","start","manualStart","end","cancel","remove","destroy","canMove","dragging","on","spillOver","spillOut","rm","add","op","grabbed","preventDefault","movements","moveX","clientX","moveY","clientY","ignore","metaKey","ctrlKey","item","context","canStart","eventualMovements","type","focus","ungrab","elementBehindCursor","mirror","findDropTarget","source","drop","Math","abs","offset","offsetX","offsetY","renderMirrorImage","style","changed","emit","parent","removeChild","reference","getReference","initialSibling","currentSibling","insertBefore","cloneNode","appendChild","removeMirrorImage","isCopy","revert","reverts","arguments","initial","isInitialPlacement","cleanup","renderTimer","clearTimeout","container","indexOf","isDropTargetAccepted","originalTarget","droppable","s","horizontal","resolve","after","outside","children","len","i","inside","handle","movable","crossvent","fn","touch","mouseup","mousedown","mousemove","pointers","microsoft","navigator","pointerEnabled","msPointerEnabled","touches","which","buttons","button","cache","lookupClass","cached","lastIndex","RegExp","addClass","current","test","rmClass","replace","trim","module","exports"],"version":3,"file":"dragula.js.map"}