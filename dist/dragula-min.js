!function(){var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function e(t){return t&&t.__esModule?t.default:t}var i,n;n=function(t,e){return Array.prototype.slice.call(t,e)};var r,o={},s="function"==typeof setImmediate;o=s?function(t){setImmediate(t)}:function(t){setTimeout(t,0)},r=function(t,e,i){t&&o((function(){t.apply(i||null,e||[])}))},i=function(t,e){var i=e||{},o={};return void 0===t&&(t={}),t.on=function(e,i){return o[e]?o[e].push(i):o[e]=[i],t},t.once=function(e,i){return i._once=!0,t.on(e,i),t},t.off=function(e,i){var n=arguments.length;if(1===n)delete o[e];else if(0===n)o={};else{var r=o[e];if(!r)return t;r.splice(r.indexOf(i),1)}return t},t.emit=function(){var e=n(arguments);return t.emitterSnapshot(e.shift()).apply(this,e)},t.emitterSnapshot=function(e){var s=(o[e]||[]).slice(0);return function(){var o=n(arguments),a=this||t;if("error"===e&&!1!==i.throws&&!s.length)throw 1===o.length?o[0]:o;return s.forEach((function(n){i.async?r(n,o,a):n.apply(a,o),n._once&&t.off(e,n)})),t}},t};var a,c={},h=t.CustomEvent;c=function(){try{var t=new h("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?h:"undefined"!=typeof document&&"function"==typeof document.createEvent?function(t,e){var i=document.createEvent("CustomEvent");return e?i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail):i.initCustomEvent(t,!1,!1,void 0),i}:function(t,e){var i=document.createEventObject();return i.type=t,e?(i.bubbles=Boolean(e.bubbles),i.cancelable=Boolean(e.cancelable),i.detail=e.detail):(i.bubbles=!1,i.cancelable=!1,i.detail=void 0),i};var u={},l=[],d="",m=/^on/;for(d in t)m.test(d)&&l.push(d.slice(2));u=l;var p=t.document,f=function(t,e,i,n){return t.addEventListener(e,i,n)},g=function(t,e,i,n){return t.removeEventListener(e,i,n)},v=[];function b(t,e,i){var n=function(t,e,i){var n,r;for(n=0;n<v.length;n++)if((r=v[n]).element===t&&r.type===e&&r.fn===i)return n}(t,e,i);if(n){var r=v[n].wrapper;return v.splice(n,1),r}}function y(i,n,r,o){const s={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},{navigator:c}=t;c.pointerEnabled?e(a)[n](i,{mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"}[r],o):c.msPointerEnabled?e(a)[n](i,{mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"}[r],o):(e(a)[n](i,s[r],o),e(a)[n](i,r,o))}function S(t,i,n){e(a)[i](t,"selectstart",n),e(a)[i](t,"click",n)}function T(t){if(void 0!==t.touches)return t.touches.length;if(void 0!==t.which&&0!==t.which)return t.which;if(void 0!==t.buttons)return t.buttons;const{button:e}=t;return void 0!==e?1&e?1:2&e?3:4&e?2:0:void 0}t.addEventListener||(f=function(e,i,n){return e.attachEvent("on"+i,function(e,i,n){var r=b(e,i,n)||function(e,i,n){return function(i){var r=i||t.event;r.target=r.target||r.srcElement,r.preventDefault=r.preventDefault||function(){r.returnValue=!1},r.stopPropagation=r.stopPropagation||function(){r.cancelBubble=!0},r.which=r.which||r.keyCode,n.call(e,r)}}(e,0,n);return v.push({wrapper:r,element:e,type:i,fn:n}),r}(e,i,n))},g=function(t,e,i){var n=b(t,e,i);if(n)return t.detachEvent("on"+e,n)}),a={add:f,remove:g,fabricate:function(t,e,i){var n=-1===u.indexOf(e)?new c(e,{detail:i}):function(){var t;p.createEvent?(t=p.createEvent("Event")).initEvent(e,!0,!0):p.createEventObject&&(t=p.createEventObject());return t}();t.dispatchEvent?t.dispatchEvent(n):t.fireEvent("on"+e,n)}};var E={};const w={};function k(t){let e=w[t];return e?e.lastIndex=0:(e=new RegExp("(?:^|\\s)"+t+"(?:\\s|$)","g"),w[t]=e),e}E={add:function(t,e){const i=t.className;i.length?k(e).test(i)||(t.className+=` ${e}`):t.className=e},rm:function(t,e){t.className=t.className.replace(k(e)," ").trim()}};const C=document,{documentElement:D}=C;function M(t){return t.parentNode===C?null:t.parentNode}function O(t,e){let i=e;for(;i!==t&&M(i)!==t;)i=M(i);return i===D?null:i}function F(t){return!!t&&("false"!==t.contentEditable&&("true"===t.contentEditable||F(M(t))))}function X(t){return"INPUT"===t.tagName||"TEXTAREA"===t.tagName||"SELECT"===t.tagName||F(t)}function N(t,e){const i=function(t){return t.targetTouches&&t.targetTouches.length?t.targetTouches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t}(e),n={pageX:"clientX",pageY:"clientY"};let r=t;return t in n&&!(t in i)&&n[t]in i&&(r=n[t]),i[r]}function Y(e,i){return void 0!==t[i]?t[i]:D.clientHeight?D[e]:C.body[e]}function I(t){return t.width||t.right-t.left}function P(t){return t.height||t.bottom-t.top}function x(t){return t.nextElementSibling||function(){let e=t;do{e=e.nextSibling}while(e&&1!==e.nodeType);return e}()}function B(t,e,i){const n=(t=t||{}).className||"";t.className+=" gu-hide";const r=C.elementFromPoint(e,i);return t.className=n,r}const A={moves:()=>!0,accepts:()=>!0,invalid:()=>!1,containers:[],isContainer:()=>!1,copy:!1,copySortSource:!1,revertOnSpill:!1,removeOnSpill:!1,direction:"vertical",ignoreInputTextSelection:!0,mirrorContainer:C.body,slideFactorX:0,slideFactorY:0};class R{spillOver(t){E.rm(t,"gu-hide")}spillOut(t){this.drake.dragging&&E.add(t,"gu-hide")}events(t=!1){const e=t?"remove":"add";y(D,e,"mousedown",this.grabFn),y(D,e,"mouseup",this.releaseFn)}preventGrabbed(t){this.grabbed&&t.preventDefault()}movements(t){S(D,t?"remove":"add",this.preventGrabbedFn)}getDrake(){return this.drake}grab(t){this.moveX=t.clientX,this.moveY=t.clientY;if(1!==T(t)||t.metaKey||t.ctrlKey)return;const e=t.target,i=this.canStart(e);i&&(this.grabbed=i,this.eventualMovements(),"mousedown"===t.type&&(X(e)?e.focus():t.preventDefault()))}ungrab(){this.grabbed=!1,this.eventualMovements(!0),this.movements(!0)}release(t){if(this.ungrab(),!this.drake.dragging)return;const e=this.copy||this.item,i=N("clientX",t)||0,n=N("clientY",t)||0,r=B(this.mirror,i,n),o=this.findDropTarget(r,i,n);o&&(this.copy&&this.options.copySortSource||!this.copy||o!==this.source)?this.drop(e,o):this.options.removeOnSpill?this.remove():this.cancel()}eventualMovements(t){y(D,t?"remove":"add","mousemove",this.movementBindFn)}startBecauseMouseMoved(t){if(!this.grabbed)return;if(0===T(t))return void this.release({});if(void 0!==t.clientX&&Math.abs(t.clientX-this.moveX)<=this.options.slideFactorX&&void 0!==t.clientY&&Math.abs(t.clientY-this.moveY)<=this.options.slideFactorY)return;if(this.options.ignoreInputTextSelection){const e=N("clientX",t)||0,i=N("clientY",t)||0;if(X(C.elementFromPoint(e,i)))return}const{grabbed:e}=this;this.eventualMovements(!0),this.movements(),this.end(),this.start(e);const i=function(t){const e=t.getBoundingClientRect();return{left:e.left+Y("scrollLeft","pageXOffset"),top:e.top+Y("scrollTop","pageYOffset")}}(this.item);this.offsetX=N("pageX",t)-i.left,this.offsetY=N("pageY",t)-i.top,E.add(this.copy||this.item,"gu-transit"),this.renderMirrorImage(),this.drag(t)}drag(t){if(!this.mirror)return;t.preventDefault();const e=N("clientX",t)||0,i=N("clientY",t)||0,n=e-this.offsetX,r=i-this.offsetY;this.mirror.style.left=`${n}px`,this.mirror.style.top=`${r}px`;const o=this.copy||this.item,s=B(this.mirror,e,i);let a=this.findDropTarget(s,e,i);const c=null!==a&&a!==this.lastDropTarget;(c||null===a)&&(this.lastDropTarget&&this.drake.emit("out",o,this.lastDropTarget,this.source),this.lastDropTarget=a,c&&this.drake.emit("over",o,this.lastDropTarget,this.source));const h=M(o);if(a===this.source&&this.copy&&!this.options.copySortSource)return void(h&&h.removeChild(o));let u;const l=O(a,s);if(null!==l)u=this.getReference(a,l,e,i);else{if(!0!==this.options.revertOnSpill||this.copy)return void(this.copy&&h&&h.removeChild(o));u=this.initialSibling,a=this.source}(null===u&&c||u!==o&&u!==x(o))&&(this.currentSibling=u,a.insertBefore(o,u),this.drake.emit("shadow",o,a,this.source))}renderMirrorImage(){if(this.mirror)return;const t=this.item.getBoundingClientRect();this.mirror=this.item.cloneNode(!0),this.mirror.style.width=`${I(t)}px`,this.mirror.style.height=`${P(t)}px`,E.rm(this.mirror,"gu-transit"),E.add(this.mirror,"gu-mirror"),this.options.mirrorContainer.appendChild(this.mirror),y(D,"add","mousemove",this.dragFn),E.add(this.options.mirrorContainer,"gu-unselectable"),this.drake.emit("cloned",this.mirror,this.item,"mirror")}removeMirrorImage(){this.mirror&&(E.rm(this.options.mirrorContainer,"gu-unselectable"),y(D,"remove","mousemove",this.dragFn),M(this.mirror).removeChild(this.mirror),this.mirror=null)}start(t){this.isCopy(t.item,t.source)&&(this.copy=t.item.cloneNode(!0),this.drake.emit("cloned",this.copy,t.item,"copy")),this.source=t.source,this.item=t.item,this.initialSibling=x(t.item),this.currentSibling=x(t.item),this.drake.dragging=!0,this.drake.emit("drag",this.item,this.source)}end(){if(!this.drake.dragging)return;const t=this.copy||this.item;this.drop(t,M(t))}cancel(t){if(!this.drake.dragging)return;const e=arguments.length>0?t:this.options.revertOnSpill,i=this.copy||this.item,n=M(i),r=this.isInitialPlacement(n);!1===r&&e&&(this.copy?n&&n.removeChild(this.copy):this.source.insertBefore(i,this.initialSibling)),r||e?this.drake.emit("cancel",i,this.source,this.source):this.drake.emit("drop",i,n,this.source,this.currentSibling),this.cleanup()}cleanup(){const t=this.copy||this.item;this.ungrab(),this.removeMirrorImage(),t&&E.rm(t,"gu-transit"),this.renderTimer&&clearTimeout(this.renderTimer),this.drake.dragging=!1,this.lastDropTarget&&this.drake.emit("out",t,this.lastDropTarget,this.source),this.drake.emit("dragend",t),this.source=this.item=this.copy=this.initialSibling=this.currentSibling=this.renderTimer=this.lastDropTarget=null}isCopy(t,e){return"boolean"==typeof this.options.copy?this.options.copy:this.options.copy(t,e)}isContainer(t){return-1!==this.drake.containers.indexOf(t)||this.options.isContainer(t)}findDropTarget(t,e,i){let n=t;for(;n&&!this.isDropTargetAccepted(n,t,e,i);)n=M(n);return n}isDropTargetAccepted(t,e,i,n){if(!1===this.isContainer(t))return!1;const r=O(t,e),o=this.getReference(t,r,i,n);return!!this.isInitialPlacement(t,o)||this.options.accepts(this.item,t,this.source,o)}isInitialPlacement(t,e){let i;return i=void 0!==e?e:this.mirror?this.currentSibling:x(this.copy||this.item),t===this.source&&i===this.initialSibling}getReference(t,e,i,n){const r="horizontal"===this.options.direction;function o(t){return t?x(e):e}return e!==t?function(){const t=e.getBoundingClientRect();return o(r?i>t.left+I(t)/2:n>t.top+P(t)/2)}():function(){const{children:e}=t,o=e.length;let s,a;for(let t=0;t<o;t++){if(s=e[t],a=s.getBoundingClientRect(),r&&a.left+a.width/2>i)return s;if(!r&&a.top+a.height/2>n)return s}return null}()}canStart(t){if(this.drake.dragging&&this.mirror)return;if(this.isContainer(t))return;const e=t;for(;M(t)&&!1===this.isContainer(M(t));){if(this.options.invalid(t,e))return;if(!(t=M(t)))return}const i=M(t);if(!i)return;if(this.options.invalid(t,e))return;return this.options.moves(t,i,e,x(t))?{item:t,source:i}:void 0}drop(t,e){const i=M(t);this.copy&&this.options.copySortSource&&e===this.source&&i.removeChild(this.item),this.isInitialPlacement(e)?this.drake.emit("cancel",t,this.source,this.source):this.drake.emit("drop",t,e,this.source,this.currentSibling),this.cleanup()}canMove(t){return!!this.canStart(t)}remove(){if(!this.drake.dragging)return;const t=this.copy||this.item,e=M(t);e&&e.removeChild(t),this.drake.emit(this.copy?"cancel":"remove",t,e,this.source),this.cleanup()}destroy(){this.events(!0),this.release({})}manualStart(t){const e=this.canStart(t);e&&this.start(e)}constructor(t={}){this.options={...A,...t},this.lastDropTarget=null,this.movementBindFn=this.startBecauseMouseMoved.bind(this),this.preventGrabbedFn=this.preventGrabbed.bind(this),this.grabFn=this.grab.bind(this),this.releaseFn=this.release.bind(this),this.dragFn=this.drag.bind(this),this.drake=e(i)({containers:this.options.containers,start:this.manualStart.bind(this),end:this.end.bind(this),cancel:this.cancel.bind(this),remove:this.remove.bind(this),destroy:this.destroy.bind(this),canMove:this.canMove.bind(this),dragging:!1}),!0===this.options.removeOnSpill&&this.drake.on("over",this.spillOver.bind(this)).on("out",this.spillOut.bind(this))}}window.dragula=(t,e)=>{void 0===e&&!1===Array.isArray(t)?e=t:Array.isArray(t)&&(void 0===e&&(e={}),!1===Object.prototype.hasOwnProperty.call(e,"containers")&&(e.containers=t));const i=new R(e);return i.events(),i.getDrake()}}();
//# sourceMappingURL=dragula-min.js.map
