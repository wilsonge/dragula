!function(){var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function e(t){return t&&t.__esModule?t.default:t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable})))),n.forEach((function(e){r(t,e,i[e])}))}return t}var s,a;a=function(t,e){return Array.prototype.slice.call(t,e)};var u,c={},h="function"==typeof setImmediate;c=h?function(t){setImmediate(t)}:function(t){setTimeout(t,0)},u=function(t,e,i){t&&c((function(){t.apply(i||null,e||[])}))},s=function(t,e){var i=e||{},n={};return void 0===t&&(t={}),t.on=function(e,i){return n[e]?n[e].push(i):n[e]=[i],t},t.once=function(e,i){return i._once=!0,t.on(e,i),t},t.off=function(e,i){var r=arguments.length;if(1===r)delete n[e];else if(0===r)n={};else{var o=n[e];if(!o)return t;o.splice(o.indexOf(i),1)}return t},t.emit=function(){var e=a(arguments);return t.emitterSnapshot(e.shift()).apply(this,e)},t.emitterSnapshot=function(e){var r=(n[e]||[]).slice(0);return function(){var n=a(arguments),o=this||t;if("error"===e&&!1!==i.throws&&!r.length)throw 1===n.length?n[0]:n;return r.forEach((function(r){i.async?u(r,n,o):r.apply(o,n),r._once&&t.off(e,r)})),t}},t};var l,d={},v=t.CustomEvent;d=function(){try{var t=new v("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?v:"undefined"!=typeof document&&"function"==typeof document.createEvent?function(t,e){var i=document.createEvent("CustomEvent");return e?i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail):i.initCustomEvent(t,!1,!1,void 0),i}:function(t,e){var i=document.createEventObject();return i.type=t,e?(i.bubbles=Boolean(e.bubbles),i.cancelable=Boolean(e.cancelable),i.detail=e.detail):(i.bubbles=!1,i.cancelable=!1,i.detail=void 0),i};var f={},m=[],p="",g=/^on/;for(p in t)g.test(p)&&m.push(p.slice(2));f=m;var y=t.document,b=function(t,e,i,n){return t.addEventListener(e,i,n)},k=function(t,e,i,n){return t.removeEventListener(e,i,n)},S=[];function w(t,e,i){var n=function(t,e,i){var n,r;for(n=0;n<S.length;n++)if((r=S[n]).element===t&&r.type===e&&r.fn===i)return n}(t,e,i);if(n){var r=S[n].wrapper;return S.splice(n,1),r}}function E(i,n,r,o){var s=t.navigator;s.pointerEnabled?e(l)[n](i,{mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"}[r],o):s.msPointerEnabled?e(l)[n](i,{mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"}[r],o):(e(l)[n](i,{mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"}[r],o),e(l)[n](i,r,o))}function T(t){if(void 0!==t.touches)return t.touches.length;if(void 0!==t.which&&0!==t.which)return t.which;if(void 0!==t.buttons)return t.buttons;var e=t.button;return void 0!==e?1&e?1:2&e?3:4&e?2:0:void 0}t.addEventListener||(b=function(e,i,n){return e.attachEvent("on"+i,function(e,i,n){var r=w(e,i,n)||function(e,i,n){return function(i){var r=i||t.event;r.target=r.target||r.srcElement,r.preventDefault=r.preventDefault||function(){r.returnValue=!1},r.stopPropagation=r.stopPropagation||function(){r.cancelBubble=!0},r.which=r.which||r.keyCode,n.call(e,r)}}(e,0,n);return S.push({wrapper:r,element:e,type:i,fn:n}),r}(e,i,n))},k=function(t,e,i){var n=w(t,e,i);if(n)return t.detachEvent("on"+e,n)}),l={add:b,remove:k,fabricate:function(t,e,i){var n=-1===f.indexOf(e)?new d(e,{detail:i}):function(){var t;return y.createEvent?(t=y.createEvent("Event")).initEvent(e,!0,!0):y.createEventObject&&(t=y.createEventObject()),t}();t.dispatchEvent?t.dispatchEvent(n):t.fireEvent("on"+e,n)}};var C={},O={};function D(t){var e=O[t];return e?e.lastIndex=0:(e=new RegExp("(?:^|\\s)"+t+"(?:\\s|$)","g"),O[t]=e),e}C={add:function(t,e){var i=t.className;i.length?D(e).test(i)||(t.className+=" ".concat(e)):t.className=e},rm:function(t,e){t.className=t.className.replace(D(e)," ").trim()}};var M=document,P=M.documentElement;function F(t){return t.parentNode===M?null:t.parentNode}function X(t,e){for(var i=e;i!==t&&F(i)!==t;)i=F(i);return i===P?null:i}function N(t){return!!t&&("false"!==t.contentEditable&&("true"===t.contentEditable||N(F(t))))}function Y(t){return"INPUT"===t.tagName||"TEXTAREA"===t.tagName||"SELECT"===t.tagName||N(t)}function I(t,e){var i=function(t){return t.targetTouches&&t.targetTouches.length?t.targetTouches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t}(e),n={pageX:"clientX",pageY:"clientY"},r=t;return t in n&&!(t in i)&&n[t]in i&&(r=n[t]),i[r]}function x(e,i){return void 0!==t[i]?t[i]:P.clientHeight?P[e]:M.body[e]}function B(t){return t.width||t.right-t.left}function j(t){return t.height||t.bottom-t.top}function A(t){return t.nextElementSibling||function(){var e=t;do{e=e.nextSibling}while(e&&1!==e.nodeType);return e}()}function R(t,e,i){var n=(t=t||{}).className||"";t.className+=" gu-hide";var r=M.elementFromPoint(e,i);return t.className=n,r}var L={moves:function(){return!0},accepts:function(){return!0},invalid:function(){return!1},containers:[],isContainer:function(){return!1},copy:!1,copySortSource:!1,revertOnSpill:!1,removeOnSpill:!1,direction:"vertical",ignoreInputTextSelection:!0,mirrorContainer:M.body,slideFactorX:0,slideFactorY:0},G=function(){"use strict";function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),this.options=o({},L,n),this.lastDropTarget=null,this.movementBindFn=this.startBecauseMouseMoved.bind(this),this.preventGrabbedFn=this.preventGrabbed.bind(this),this.grabFn=this.grab.bind(this),this.releaseFn=this.release.bind(this),this.dragFn=this.drag.bind(this),this.drake=e(s)({containers:this.options.containers,start:this.manualStart.bind(this),end:this.end.bind(this),cancel:this.cancel.bind(this),remove:this.remove.bind(this),destroy:this.destroy.bind(this),canMove:this.canMove.bind(this),dragging:!1}),!0===this.options.removeOnSpill&&this.drake.on("over",this.spillOver.bind(this)).on("out",this.spillOut.bind(this))}var r,a,u;return r=t,a=[{key:"spillOver",value:function(t){C.rm(t,"gu-hide")}},{key:"spillOut",value:function(t){this.drake.dragging&&C.add(t,"gu-hide")}},{key:"events",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=t?"remove":"add";E(P,e,"mousedown",this.grabFn),E(P,e,"mouseup",this.releaseFn)}},{key:"preventGrabbed",value:function(t){this.grabbed&&t.preventDefault()}},{key:"movements",value:function(t){!function(t,i,n){e(l)[i](t,"selectstart",n),e(l)[i](t,"click",n)}(P,t?"remove":"add",this.preventGrabbedFn)}},{key:"getDrake",value:function(){return this.drake}},{key:"grab",value:function(t){if(this.moveX=t.clientX,this.moveY=t.clientY,1===T(t)&&!t.metaKey&&!t.ctrlKey){var e=t.target,i=this.canStart(e);i&&(this.grabbed=i,this.eventualMovements(),"mousedown"===t.type&&(Y(e)?e.focus():t.preventDefault()))}}},{key:"ungrab",value:function(){this.grabbed=!1,this.eventualMovements(!0),this.movements(!0)}},{key:"release",value:function(t){if(this.ungrab(),this.drake.dragging){var e=this.copy||this.item,i=I("clientX",t)||0,n=I("clientY",t)||0,r=R(this.mirror,i,n),o=this.findDropTarget(r,i,n);o&&(this.copy&&this.options.copySortSource||!this.copy||o!==this.source)?this.drop(e,o):this.options.removeOnSpill?this.remove():this.cancel()}}},{key:"eventualMovements",value:function(t){E(P,t?"remove":"add","mousemove",this.movementBindFn)}},{key:"startBecauseMouseMoved",value:function(t){if(this.grabbed)if(0!==T(t)){if(!(void 0!==t.clientX&&Math.abs(t.clientX-this.moveX)<=this.options.slideFactorX&&void 0!==t.clientY&&Math.abs(t.clientY-this.moveY)<=this.options.slideFactorY)){if(this.options.ignoreInputTextSelection){var e=I("clientX",t)||0,i=I("clientY",t)||0;if(Y(M.elementFromPoint(e,i)))return}var n=this.grabbed;this.eventualMovements(!0),this.movements(),this.end(),this.start(n);var r,o,s=(r=this.item,{left:(o=r.getBoundingClientRect()).left+x("scrollLeft","pageXOffset"),top:o.top+x("scrollTop","pageYOffset")});this.offsetX=I("pageX",t)-s.left,this.offsetY=I("pageY",t)-s.top,C.add(this.copy||this.item,"gu-transit"),this.renderMirrorImage(),this.drag(t)}}else this.release({})}},{key:"drag",value:function(t){if(this.mirror){t.preventDefault();var e=I("clientX",t)||0,i=I("clientY",t)||0,n=e-this.offsetX,r=i-this.offsetY;this.mirror.style.left="".concat(n,"px"),this.mirror.style.top="".concat(r,"px");var o=this.copy||this.item,s=R(this.mirror,e,i),a=this.findDropTarget(s,e,i),u=null!==a&&a!==this.lastDropTarget;(u||null===a)&&(this.lastDropTarget&&this.drake.emit("out",o,this.lastDropTarget,this.source),this.lastDropTarget=a,u&&this.drake.emit("over",o,this.lastDropTarget,this.source));var c=F(o);if(a!==this.source||!this.copy||this.options.copySortSource){var h,l=X(a,s);if(null!==l)h=this.getReference(a,l,e,i);else{if(!0!==this.options.revertOnSpill||this.copy)return void(this.copy&&c&&c.removeChild(o));h=this.initialSibling,a=this.source}(null===h&&u||h!==o&&h!==A(o))&&(this.currentSibling=h,a.insertBefore(o,h),this.drake.emit("shadow",o,a,this.source))}else c&&c.removeChild(o)}}},{key:"renderMirrorImage",value:function(){if(!this.mirror){var t=this.item.getBoundingClientRect();this.mirror=this.item.cloneNode(!0),this.mirror.style.width="".concat(B(t),"px"),this.mirror.style.height="".concat(j(t),"px"),C.rm(this.mirror,"gu-transit"),C.add(this.mirror,"gu-mirror"),this.options.mirrorContainer.appendChild(this.mirror),E(P,"add","mousemove",this.dragFn),C.add(this.options.mirrorContainer,"gu-unselectable"),this.drake.emit("cloned",this.mirror,this.item,"mirror")}}},{key:"removeMirrorImage",value:function(){this.mirror&&(C.rm(this.options.mirrorContainer,"gu-unselectable"),E(P,"remove","mousemove",this.dragFn),F(this.mirror).removeChild(this.mirror),this.mirror=null)}},{key:"start",value:function(t){this.isCopy(t.item,t.source)&&(this.copy=t.item.cloneNode(!0),this.drake.emit("cloned",this.copy,t.item,"copy")),this.source=t.source,this.item=t.item,this.initialSibling=A(t.item),this.currentSibling=A(t.item),this.drake.dragging=!0,this.drake.emit("drag",this.item,this.source)}},{key:"end",value:function(){if(this.drake.dragging){var t=this.copy||this.item;this.drop(t,F(t))}}},{key:"cancel",value:function(t){if(this.drake.dragging){var e=arguments.length>0?t:this.options.revertOnSpill,i=this.copy||this.item,n=F(i),r=this.isInitialPlacement(n);!1===r&&e&&(this.copy?n&&n.removeChild(this.copy):this.source.insertBefore(i,this.initialSibling)),r||e?this.drake.emit("cancel",i,this.source,this.source):this.drake.emit("drop",i,n,this.source,this.currentSibling),this.cleanup()}}},{key:"cleanup",value:function(){var t=this.copy||this.item;this.ungrab(),this.removeMirrorImage(),t&&C.rm(t,"gu-transit"),this.renderTimer&&clearTimeout(this.renderTimer),this.drake.dragging=!1,this.lastDropTarget&&this.drake.emit("out",t,this.lastDropTarget,this.source),this.drake.emit("dragend",t),this.source=this.item=this.copy=this.initialSibling=this.currentSibling=this.renderTimer=this.lastDropTarget=null}},{key:"isCopy",value:function(t,e){return"boolean"==typeof this.options.copy?this.options.copy:this.options.copy(t,e)}},{key:"isContainer",value:function(t){return-1!==this.drake.containers.indexOf(t)||this.options.isContainer(t)}},{key:"findDropTarget",value:function(t,e,i){for(var n=t;n&&!this.isDropTargetAccepted(n,t,e,i);)n=F(n);return n}},{key:"isDropTargetAccepted",value:function(t,e,i,n){if(!1===this.isContainer(t))return!1;var r=X(t,e),o=this.getReference(t,r,i,n);return!!this.isInitialPlacement(t,o)||this.options.accepts(this.item,t,this.source,o)}},{key:"isInitialPlacement",value:function(t,e){var i;return i=void 0!==e?e:this.mirror?this.currentSibling:A(this.copy||this.item),t===this.source&&i===this.initialSibling}},{key:"getReference",value:function(t,e,i,n){var r,o=function(t){return t?A(e):e},s="horizontal"===this.options.direction;return e!==t?(r=e.getBoundingClientRect(),o(s?i>r.left+B(r)/2:n>r.top+j(r)/2)):function(){for(var e,r,o=t.children,a=o.length,u=0;u<a;u++){if(r=(e=o[u]).getBoundingClientRect(),s&&r.left+r.width/2>i)return e;if(!s&&r.top+r.height/2>n)return e}return null}()}},{key:"canStart",value:function(t){if(!(this.drake.dragging&&this.mirror||this.isContainer(t))){for(var e=t;F(t)&&!1===this.isContainer(F(t));){if(this.options.invalid(t,e))return;if(!(t=F(t)))return}var i=F(t);if(i&&!this.options.invalid(t,e)&&this.options.moves(t,i,e,A(t)))return{item:t,source:i}}}},{key:"drop",value:function(t,e){var i=F(t);this.copy&&this.options.copySortSource&&e===this.source&&i.removeChild(this.item),this.isInitialPlacement(e)?this.drake.emit("cancel",t,this.source,this.source):this.drake.emit("drop",t,e,this.source,this.currentSibling),this.cleanup()}},{key:"canMove",value:function(t){return!!this.canStart(t)}},{key:"remove",value:function(){if(this.drake.dragging){var t=this.copy||this.item,e=F(t);e&&e.removeChild(t),this.drake.emit(this.copy?"cancel":"remove",t,e,this.source),this.cleanup()}}},{key:"destroy",value:function(){this.events(!0),this.release({})}},{key:"manualStart",value:function(t){var e=this.canStart(t);e&&this.start(e)}}],a&&n(r.prototype,a),u&&n(r,u),t}();window.dragula=function(t,e){void 0===e&&!1===Array.isArray(t)?(e=t,t=[]):void 0!==e&&!1===e.hasOwnProperty("containers")&&Array.isArray(t)?e.containers=t:e={containers:t};var i=new G(e);return i.events(),i.getDrake()}}();
//# sourceMappingURL=dragula-min.js.map
