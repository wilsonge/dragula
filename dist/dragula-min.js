!function(){var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},i={};i=function(t,e){return Array.prototype.slice.call(t,e)};var r={},n={};function s(t){if(void 0!==t.touches)return t.touches.length;if(void 0!==t.which&&0!==t.which)return t.which;if(void 0!==t.buttons)return t.buttons;let{button:e}=t;if(void 0!==e)return 1&e?1:2&e?3:4&e?2:0}n="function"==typeof setImmediate?function(t){setImmediate(t)}:function(t){setTimeout(t,0)},r=function(t,e,i){t&&n(function(){t.apply(i||null,e||[])})},e=function(t,e){var n=e||{},s={};return void 0===t&&(t={}),t.on=function(e,i){return s[e]?s[e].push(i):s[e]=[i],t},t.once=function(e,i){return i._once=!0,t.on(e,i),t},t.off=function(e,i){var r=arguments.length;if(1===r)delete s[e];else if(0===r)s={};else{var n=s[e];if(!n)return t;n.splice(n.indexOf(i),1)}return t},t.emit=function(){var e=i(arguments);return t.emitterSnapshot(e.shift()).apply(this,e)},t.emitterSnapshot=function(e){var o=(s[e]||[]).slice(0);return function(){var s=i(arguments),h=this||t;if("error"===e&&!1!==n.throws&&!o.length)throw 1===s.length?s[0]:s;return o.forEach(function(i){n.async?r(i,s,h):i.apply(h,s),i._once&&t.off(e,i)}),t}},t};let o=document,{documentElement:h}=o;function a(t){return t.parentNode===o?null:t.parentNode}function l(t,e){let i=e;for(;i!==t&&a(i)!==t;)i=a(i);return i===h?null:i}function c(t){return"INPUT"===t.tagName||"TEXTAREA"===t.tagName||"SELECT"===t.tagName||function t(e){return!!e&&"false"!==e.contentEditable&&("true"===e.contentEditable||t(a(e)))}(t)}function u(t,e){let i=e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,r={pageX:"clientX",pageY:"clientY"},n=t;return t in r&&!(t in i)&&r[t]in i&&(n=r[t]),i[n]}function d(e,i){return void 0!==t[i]?t[i]:h.clientHeight?h[e]:o.body[e]}function p(t){return t.width||t.right-t.left}function m(t){return t.height||t.bottom-t.top}function g(t){return t.nextElementSibling||function(){let e=t;do e=e.nextSibling;while(e&&1!==e.nodeType)return e}()}function f(t,e,i){let r=(t=t||{}).className||"";t.className+=" gu-hide";let n=o.elementFromPoint(e,i);return t.className=r,n}let v={moves:()=>!0,accepts:()=>!0,invalid:()=>!1,containers:[],isContainer:()=>!1,copy:!1,copySortSource:!1,revertOnSpill:!1,removeOnSpill:!1,direction:"vertical",ignoreInputTextSelection:!0,mirrorContainer:o.body,slideFactorX:0,slideFactorY:0};class b{constructor(t={}){var i;this.options={...v,...t},this.lastDropTarget=null,this.movementBindFn=this.startBecauseMouseMoved.bind(this),this.preventGrabbedFn=this.preventGrabbed.bind(this),this.grabFn=this.grab.bind(this),this.releaseFn=this.release.bind(this),this.dragFn=this.drag.bind(this),this.drake=((i=e)&&i.__esModule?i.default:i)({containers:this.options.containers,start:this.manualStart.bind(this),end:this.end.bind(this),cancel:this.cancel.bind(this),remove:this.remove.bind(this),destroy:this.destroy.bind(this),canMove:this.canMove.bind(this),dragging:!1}),!0===this.options.removeOnSpill&&this.drake.on("over",this.spillOver.bind(this)).on("out",this.spillOut.bind(this))}spillOver(t){t.classList.remove("gu-hide")}spillOut(t){this.drake.dragging&&t.classList.add("gu-hide")}events(t=!1){t?(h.removeEventListener("pointerdown",this.grabFn),h.removeEventListener("pointerup",this.releaseFn)):(h.addEventListener("pointerdown",this.grabFn),h.addEventListener("pointerup",this.releaseFn))}preventGrabbed(t){this.grabbed&&t.preventDefault()}movements(t){t?h.removeEventListener("click",this.preventGrabbedFn):h.addEventListener("click",this.preventGrabbedFn)}getDrake(){return this.drake}grab(t){if(this.moveX=t.clientX,this.moveY=t.clientY,1!==s(t)||t.metaKey||t.ctrlKey)return;let e=t.target,i=this.canStart(e);i&&(this.grabbed=i,this.eventualMovements(),"mousedown"===t.type&&(c(e)?e.focus():t.preventDefault()))}ungrab(){this.grabbed=!1,this.eventualMovements(!0),this.movements(!0)}release(t){if(this.ungrab(),!this.drake.dragging)return;let e=this.copy||this.item,i=u("clientX",t)||0,r=u("clientY",t)||0,n=f(this.mirror,i,r),s=this.findDropTarget(n,i,r);s&&(this.copy&&this.options.copySortSource||!this.copy||s!==this.source)?this.drop(e,s):this.options.removeOnSpill?this.remove():this.cancel()}eventualMovements(t){t?h.removeEventListener("pointermove",this.movementBindFn):h.addEventListener("pointermove",this.movementBindFn)}startBecauseMouseMoved(t){if(!this.grabbed)return;if(0===s(t)){this.release({});return}if(void 0!==t.clientX&&Math.abs(t.clientX-this.moveX)<=this.options.slideFactorX&&void 0!==t.clientY&&Math.abs(t.clientY-this.moveY)<=this.options.slideFactorY)return;if(this.options.ignoreInputTextSelection){let e=u("clientX",t)||0,i=u("clientY",t)||0;if(c(o.elementFromPoint(e,i)))return}let{grabbed:e}=this;this.eventualMovements(!0),this.movements(),this.end(),this.start(e);let i=function(t){let e=t.getBoundingClientRect();return{left:e.left+d("scrollLeft","pageXOffset"),top:e.top+d("scrollTop","pageYOffset")}}(this.item);this.offsetX=u("pageX",t)-i.left,this.offsetY=u("pageY",t)-i.top,(this.copy||this.item).classList.add("gu-transit"),this.renderMirrorImage(),this.drag(t)}drag(t){let e;if(!this.mirror)return;t.preventDefault();let i=u("clientX",t)||0,r=u("clientY",t)||0,n=i-this.offsetX,s=r-this.offsetY;this.mirror.style.left=`${n}px`,this.mirror.style.top=`${s}px`;let o=this.copy||this.item,h=f(this.mirror,i,r),c=this.findDropTarget(h,i,r),d=null!==c&&c!==this.lastDropTarget;(d||null===c)&&(this.lastDropTarget&&this.drake.emit("out",o,this.lastDropTarget,this.source),this.lastDropTarget=c,d&&this.drake.emit("over",o,this.lastDropTarget,this.source));let p=a(o);if(c===this.source&&this.copy&&!this.options.copySortSource){p&&p.removeChild(o);return}let m=l(c,h);if(null!==m)e=this.getReference(c,m,i,r);else if(!0!==this.options.revertOnSpill||this.copy){this.copy&&p&&p.removeChild(o);return}else e=this.initialSibling,c=this.source;(null===e&&d||e!==o&&e!==g(o))&&(this.currentSibling=e,c.insertBefore(o,e),this.drake.emit("shadow",o,c,this.source))}renderMirrorImage(){if(this.mirror)return;let t=this.item.getBoundingClientRect();this.mirror=this.item.cloneNode(!0),this.mirror.style.width=`${p(t)}px`,this.mirror.style.height=`${m(t)}px`,this.mirror.classList.remove("gu-transit"),this.mirror.classList.add("gu-mirror"),this.options.mirrorContainer.appendChild(this.mirror),h.addEventListener("pointermove",this.dragFn),this.options.mirrorContainer.classList.add("gu-unselectable"),this.drake.emit("cloned",this.mirror,this.item,"mirror")}removeMirrorImage(){this.mirror&&(this.options.mirrorContainer.classList.remove("gu-unselectable"),h.removeEventListener("pointermove",this.dragFn),a(this.mirror).removeChild(this.mirror),this.mirror=null)}start(t){this.isCopy(t.item,t.source)&&(this.copy=t.item.cloneNode(!0),this.drake.emit("cloned",this.copy,t.item,"copy")),this.source=t.source,this.item=t.item,this.initialSibling=g(t.item),this.currentSibling=g(t.item),this.drake.dragging=!0,this.drake.emit("drag",this.item,this.source)}end(){if(!this.drake.dragging)return;let t=this.copy||this.item;this.drop(t,a(t))}cancel(t){if(!this.drake.dragging)return;let e=arguments.length>0?t:this.options.revertOnSpill,i=this.copy||this.item,r=a(i),n=this.isInitialPlacement(r);!1===n&&e&&(this.copy?r&&r.removeChild(this.copy):this.source.insertBefore(i,this.initialSibling)),n||e?this.drake.emit("cancel",i,this.source,this.source):this.drake.emit("drop",i,r,this.source,this.currentSibling),this.cleanup()}cleanup(){let t=this.copy||this.item;this.ungrab(),this.removeMirrorImage(),t&&t.classList.remove("gu-transit"),this.drake.dragging=!1,this.lastDropTarget&&this.drake.emit("out",t,this.lastDropTarget,this.source),this.drake.emit("dragend",t),this.source=this.item=this.copy=this.initialSibling=this.currentSibling=this.lastDropTarget=null}isCopy(t,e){return"boolean"==typeof this.options.copy?this.options.copy:this.options.copy(t,e)}isContainer(t){return -1!==this.drake.containers.indexOf(t)||this.options.isContainer(t)}findDropTarget(t,e,i){let r=t;for(;r&&!this.isDropTargetAccepted(r,t,e,i);)r=a(r);return r}isDropTargetAccepted(t,e,i,r){if(!1===this.isContainer(t))return!1;let n=l(t,e),s=this.getReference(t,n,i,r);return!!this.isInitialPlacement(t,s)||this.options.accepts(this.item,t,this.source,s)}isInitialPlacement(t,e){let i;return i=void 0!==e?e:this.mirror?this.currentSibling:g(this.copy||this.item),t===this.source&&i===this.initialSibling}getReference(t,e,i,r){let n="horizontal"===this.options.direction;return e!==t?function(){let t=e.getBoundingClientRect();return n?i>t.left+p(t)/2?g(e):e:r>t.top+m(t)/2?g(e):e}():function(){let e,s;let{children:o}=t,h=o.length;for(let t=0;t<h;t++)if(s=(e=o[t]).getBoundingClientRect(),n&&s.left+s.width/2>i||!n&&s.top+s.height/2>r)return e;return null}()}canStart(t){if(this.drake.dragging&&this.mirror||this.isContainer(t))return;let e=t;for(;a(t)&&!1===this.isContainer(a(t));)if(this.options.invalid(t,e)||!(t=a(t)))return;let i=a(t);if(!(!i||this.options.invalid(t,e))&&this.options.moves(t,i,e,g(t)))return{item:t,source:i}}drop(t,e){let i=a(t);this.copy&&this.options.copySortSource&&e===this.source&&i.removeChild(this.item),this.isInitialPlacement(e)?this.drake.emit("cancel",t,this.source,this.source):this.drake.emit("drop",t,e,this.source,this.currentSibling),this.cleanup()}canMove(t){return!!this.canStart(t)}remove(){if(!this.drake.dragging)return;let t=this.copy||this.item,e=a(t);e&&e.removeChild(t),this.drake.emit(this.copy?"cancel":"remove",t,e,this.source),this.cleanup()}destroy(){this.events(!0),this.release({})}manualStart(t){let e=this.canStart(t);e&&this.start(e)}}window.dragula=(t,e)=>{void 0===e&&!1===Array.isArray(t)?e=t:Array.isArray(t)&&(void 0===e&&(e={}),!1===Object.prototype.hasOwnProperty.call(e,"containers")&&(e.containers=t));let i=new b(e);return i.events(),i.getDrake()}}();
//# sourceMappingURL=dragula-min.js.map
